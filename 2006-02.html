<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="ja-JP">
<head>

<script>window.RufflePlayer=window.RufflePlayer||{};window.RufflePlayer.config={"autoplay":"on","unmuteOverlay":"hidden","showSwfDownload":true};</script>

<script type="text/javascript">
    __wm.init("https://web.archive.org/web");
  __wm.wombat("http://www.coins.tsukuba.ac.jp:80/~i021216/diary/?date=200602","20070327065535","https://web.archive.org/","web","https://web-static.archive.org/_static/",
	      "1174978535");
</script>


<!-- End Wayback Rewrite JS Include -->

	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="generator" content="tDiary 2.0.0">
	<meta http-equiv="Last-Modified" content="Tue, 06 Mar 2007 11:57:17 GMT">
	<meta http-equiv="Content-Script-Type" content="text/javascript; charset=UTF-8">
	<meta name="author" content="水島宏太">
	<link rev="made" href="mailto:hau51010{at}tree.odn.ne.jp">
	<link rel="index" title="トップ" href="http://www.coins.tsukuba.ac.jp/~i021216/">
	<link rel="start" title="最新" href="./">
	<meta http-equiv="content-style-type" content="text/css">
	<link rel="stylesheet" href="/web/20070327065535cs_/http://www.coins.tsukuba.ac.jp/~i021216/diary/theme/base.css" type="text/css" media="all">
	<link rel="stylesheet" href="/web/20070327065535cs_/http://www.coins.tsukuba.ac.jp/~i021216/diary/theme/another_blue/another_blue.css" title="another_blue" type="text/css" media="all">
	<title>Onion開発日記(2006-02)</title>
	
	<!--link rel="alternate" type="application/x-lirs" title="lirs" href="antenna.lirs"-->
	

<style>
    /* Modern Styling */
    body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Noto Sans JP", Roboto, "Helvetica Neue", Arial, sans-serif;
        line-height: 1.7;
        max-width: 900px;
        margin: 0 auto;
        padding: 20px;
        background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        color: #333;
    }
    
    h1 {
        color: #2c3e50;
        border-bottom: 3px solid #3498db;
        padding-bottom: 12px;
        font-size: 2em;
        margin-top: 0;
    }
    
    h2 {
        color: #34495e;
        border-left: 4px solid #3498db;
        padding-left: 12px;
        margin-top: 30px;
    }
    
    h3 {
        color: #555;
        margin-top: 24px;
    }
    
    .day {
        background: white;
        border-radius: 12px;
        padding: 24px;
        margin-bottom: 24px;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        transition: transform 0.2s, box-shadow 0.2s;
    }
    
    .day:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 12px rgba(0,0,0,0.15);
    }
    
    .section {
        margin: 16px 0;
        padding: 12px;
        border-left: 3px solid #e8e8e8;
    }
    
    .date {
        color: #3498db;
        font-weight: 600;
    }
    
    .title {
        color: #2c3e50;
        font-size: 1.3em;
    }
    
    a {
        color: #3498db;
        text-decoration: none;
        transition: color 0.2s;
    }
    
    a:hover {
        color: #2980b9;
        text-decoration: underline;
    }
    
    pre {
        background: #f8f9fa;
        border: 1px solid #e9ecef;
        border-radius: 6px;
        padding: 16px;
        overflow-x: auto;
        font-size: 0.9em;
    }
    
    code {
        background: #f8f9fa;
        padding: 2px 6px;
        border-radius: 3px;
        font-family: 'Courier New', Courier, monospace;
    }
    
    .comment {
        background: #f8f9fa;
        border-radius: 8px;
        padding: 16px;
        margin-top: 20px;
    }
    
    .adminmenu, .calendar, .todo {
        background: white;
        border-radius: 8px;
        padding: 12px;
        margin-bottom: 16px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .referer {
        font-size: 0.85em;
        color: #7f8c8d;
        margin-top: 16px;
        padding-top: 12px;
        border-top: 1px solid #e8e8e8;
    }
    
    /* Web Archive ツールバーを非表示 */
    #wm-ipp-base, #wm-ipp, #donato {
        display: none !important;
    }
    
    hr.sep {
        border: none;
        border-top: 2px solid #e8e8e8;
        margin: 30px 0;
    }
</style>

</head>
<body>


<div class="adminmenu">
<span class="adminmenu"><a href="https://web.archive.org/web/20070327065535/http://www.coins.tsukuba.ac.jp/~i021216/">トップ</a></span>
<span class="adminmenu"><a href="./">最新</a></span>
<span class="adminmenu"><a href="update.rb">追記</a></span>
</div>
<h1>Onion開発日記</h1>
<div class="calendar">
<div class="year">2004|<a href="./?date=200409">09</a>|<a href="./?date=200410">10</a>|<a href="./?date=200411">11</a>|<a href="./?date=200412">12</a>|</div>
<div class="year">2005|<a href="./?date=200501">01</a>|<a href="./?date=200502">02</a>|<a href="./?date=200503">03</a>|<a href="./?date=200504">04</a>|<a href="./?date=200505">05</a>|<a href="./?date=200506">06</a>|<a href="./?date=200507">07</a>|<a href="./?date=200508">08</a>|<a href="./?date=200509">09</a>|<a href="./?date=200510">10</a>|<a href="./?date=200511">11</a>|<a href="./?date=200512">12</a>|</div>
<div class="year">2006|<a href="./?date=200601">01</a>|<a href="./?date=200602">02</a>|<a href="./?date=200603">03</a>|<a href="./?date=200604">04</a>|<a href="./?date=200605">05</a>|<a href="./?date=200606">06</a>|<a href="./?date=200607">07</a>|<a href="./?date=200608">08</a>|<a href="./?date=200609">09</a>|<a href="./?date=200610">10</a>|<a href="./?date=200611">11</a>|<a href="./?date=200612">12</a>|</div>
<div class="year">2007|<a href="./?date=200701">01</a>|<a href="./?date=200702">02</a>|<a href="./?date=200703">03</a>|</div>
</div>
<div class="todo">
	<div class="todo-title">
		<p>ToDo:</p>
	</div>
	<div class="todo-body">
<ul>
</ul>

	</div>
</div>


<hr class="sep">


	
<div class="day">
<h2><span class="date"><a href="./?date=20060201">2006-02-01</a></span> <span class="title"></span></h2>

<div class="body">

<div class="section">
<h3><a href="./?date=20060201#p01"><span class="sanchor">_</span></a> [<a href="./?year=2006;month=1Q;category=Java">Java</a>]JavaでMixinもどき</h3><p>
<a href="https://web.archive.org/web/20070327065535/http://www.programmers-paradise.com/tdiary/?date=20060131">プログラマー日記の<s>1/3</s>1/31のエントリ</a>より引用：
</p>
<blockquote>
見ればわかりますが、ただの委譲です。今回の例ならこれで済んじゃうので、もっとこう、ただの委譲じゃ実現できないことが実現できるぞという例がみたいです。
</blockquote>
<p>
こんな感じでいかがでしょうか。RubyのEnumerableのようなものをJavaで実装してみました。これだと単なる委譲では実現するのは面倒だと思います。
あと、MyListのフィールドmixinをEnumerable型を引数に取るuseEnumerableに渡している所にも注意してください。
</p>
<pre>
import java.util.*;
public class UseMixin {
  //Enumerableを使って何かする
  static void useEnumerable(Enumerable&lt;Integer&gt; enumerable){
    //全部の要素を出力する
    enumerable.each(new Procedure&lt;Integer&gt;(){
      public void call(Integer arg){
        System.out.println(arg);
      }
    });
<br>
    //リストの全ての要素を2倍する
    List&lt;Integer&gt; list = enumerable.collect(new Function&lt;Integer, Integer&gt;(){
      public Integer call(Integer arg){
        return arg * 2;
      }
    });  
    System.out.println("list = " + list);
<br>
    //リストの各要素の和を計算する
    int sum = enumerable.inject(0, new Function2&lt;Integer, Integer, Integer&gt;(){
      public Integer call(Integer arg1, Integer arg2){
        return arg1 + arg2;
      }
    });
    System.out.println("sum(1..10) = " +  sum);
  }
<br>
  public static void main(String[] args){
    MyList&lt;Integer&gt; nums = new MyList&lt;Integer&gt;();
    for(int i = 1; i &lt;= 10; i++){
      nums.add(i);
    }
    useEnumerable(nums.mixin);//((Enumerable)nums)に相当
  }
}
<br>
interface Function&lt;T, R&gt; {
  R call(T arg);
}
<br>
interface Function2&lt;T1, T2, R&gt; {
  R call(T1 arg1, T2 arg2);
}
<br>
interface Procedure&lt;T&gt; {
  void call(T arg);
}
<br>
//変更可能なT型の値を作るためのクラス
class Mutable&lt;T&gt; {
  T value;
  Mutable(T value) { this.value = value; }
}
<br>
abstract class Enumerable&lt;E&gt; {
  abstract void each(Procedure&lt;E&gt; proc);
<br>
  &lt;R&gt; List&lt;R&gt; collect(final Function&lt;E, R&gt; func){
    final List&lt;R&gt; list = new ArrayList&lt;R&gt;();
    each(new Procedure&lt;E&gt;(){
      public void call(E e){
        list.add(func.call(e));
      }
    });
    return list;
  }
<br>
  &lt;R&gt; R inject(final R init, final Function2&lt;E, R, R&gt; func){
    final Mutable&lt;R&gt; var = new Mutable&lt;R&gt;(init);
    each(new Procedure&lt;E&gt;(){
      public void call(E e){
        var.value = func.call(e, var.value);
      }
    });
    return var.value;
  }
}
<br>
//<s>Enumerableを使用</s>EnumerableをMixin
class MyList&lt;T&gt; extends ArrayList&lt;T&gt; {
  Enumerable&lt;T&gt; mixin = new Enumerable&lt;T&gt;(){
    //collectとinjectは実装しなくてOK
    public void each(Procedure&lt;T&gt; proc){
      for(T t : MyList.this){
        proc.call(t);
      }
    }
  };
}
</pre>
<p>
出力結果：
</p>
<pre>
1
2
3
4
5
6
7
8
9
10
list = [2, 4, 6, 8, 10, 12, 14, 16, 18, 20]
sum(1..10) = 55
</pre></div>

</div>

<div class="comment">

		<div class="caption">本日のツッコミ(全4件) [<a href="./?date=20060201#c">ツッコミを入れる</a>]</div>
		<div class="commentshort">
				<p><a href="./?date=20060201#c01"><span class="canchor">_</span></a>
				<span class="commentator">nt</span>&nbsp;[なんかしらんけどすごいな．  mix-inって要するにどういう目的の概念なん？  ]</p>
				<p><a href="./?date=20060201#c02"><span class="canchor">_</span></a>
				<span class="commentator">maeda</span>&nbsp;[nums.mixinよりnums.asEnumerable()の方が良くない？ んで、asEnumerable()を..]</p>
				<p><a href="./?date=20060201#c03"><span class="canchor">_</span></a>
				<span class="commentator">みずしま</span>&nbsp;[&gt; nums.mixinよりnums.asEnumerable()の方が良くない？  確かにそうですね。mixinが..]</p>
				<p><a href="./?date=20060201#c04"><span class="canchor">_</span></a>
				<span class="commentator">みずしま</span>&nbsp;[ntさん &gt; mix-inって要するにどういう目的の概念なん？  返事遅くなってごめん。一言で言うと、クラスの多重継..]</p>
		</div>
</div>







		<div class="referer">
		本日のリンク元 | <a href="https://web.archive.org/web/20070327065535/http://www.programmers-paradise.com/tdiary/?date=20060131" title="http://www.programmers-paradise.com/tdiary/?date=2...">50</a> | <a href="https://web.archive.org/web/20070327065535/http://mixi.jp/view_diary.pl?url=http%3A%2F%2Fwww2.coins.tsukuba.ac.jp%2F~i021216%2Fdiary%2F%3Fdate%3D20060201%23p01&amp;owner_id=170835" title="http://mixi.jp/view_diary.pl?url=http://www2.coins...">18</a> | <a href="https://web.archive.org/web/20070327065535/http://www.coins.tsukuba.ac.jp/~hdk/hina/" title="http://www.coins.tsukuba.ac.jp/~hdk/hina/">17</a> | <a href="https://web.archive.org/web/20070327065535/http://a.hatena.ne.jp/lethevert/" title="http://a.hatena.ne.jp/lethevert/">6</a> | <a href="https://web.archive.org/web/20070327065535/http://www2.coins.tsukuba.ac.jp/~i021216/" title="http://www2.coins.tsukuba.ac.jp/~i021216/">4</a> | <a href="https://web.archive.org/web/20070327065535/http://a.hatena.ne.jp/ucho/" title="http://a.hatena.ne.jp/ucho/">4</a> | <a href="https://web.archive.org/web/20070327065535/http://www.coins.tsukuba.ac.jp/~i021216/diary/?date=200602" title="http://www.coins.tsukuba.ac.jp/~i021216/diary/?dat...">3</a> | <a href="https://web.archive.org/web/20070327065535/http://labs.ceek.jp/jblog/" title="http://labs.ceek.jp/jblog/">3</a> | <a href="https://web.archive.org/web/20070327065535/http://www.google.com/search?hl=ja&amp;lr=lang_ja&amp;ie=UTF-8&amp;oe=UTF-8&amp;q=Eclipse+profiler&amp;num=50" title="google検索(Eclipse profiler)">2</a> | <a href="https://web.archive.org/web/20070327065535/http://www.google.co.jp/search?hl=ja&amp;newwindow=1&amp;q=java1.5+ArrayList%3C&amp;btnG=Google+%E6%A4%9C%E7%B4%A2&amp;lr=lang_ja" title="google検索(java1.5 ArrayList<)">2</a> | <a href="./?date=20060201#t">TrackBack(0)</a>
		</div>
</div>


	<hr class="sep">
	
<div class="day">
<h2><span class="date"><a href="./?date=20060202">2006-02-02</a></span> <span class="title"></span></h2>

<div class="body">

<div class="section">
<h3><a href="./?date=20060202#p01"><span class="sanchor">_</span></a> [<a href="./?year=2006;month=1Q;category=Java">Java</a>]続・JavaでMixinもどき</h3><p>
<a href="https://web.archive.org/web/20070327065535/http://www2.coins.tsukuba.ac.jp/~i021216/diary/?date=20060201#c">maedaさんからのツッコミ</a>があったので、それを受けて
<a href="https://web.archive.org/web/20070327065535/http://www2.coins.tsukuba.ac.jp/~i021216/diary/?date=20060201">昨日の例</a>を改良してみた。また、ただ改良するだけでは面白くないので、Fileクラスを継承したクラスにもMixinしてみた。
</p>
<pre>
import java.io.*;
import java.util.*;
<br>
public class UseMixin {
  //ディレクトリ直下のファイルサイズの合計を調べる
  static long sumSize(EnumerableSrc&lt;File&gt; src){
    return src.asEnumerable().inject(0L, new Function2&lt;File, Long, Long&gt;(){
      public Long call(File f, Long r){ 
        return f.length() + r; 
      }
    });
  }
<br>
  //ファイルサイズとファイル名をつなげた文字列のリストを返す
  static List&lt;String&gt; fileSizeAndNames(EnumerableSrc&lt;File&gt; src){
    return src.asEnumerable().collect(new Function&lt;File, String&gt;(){
      public String call(File f){ 
        return "ファイルサイズ: " + f.length() + " バイト\t" +  
      "ファイル名: " + f.getName();
      }
    });
  }
<br>
  public static void main(String[] args){
    EnumerableFile file = new EnumerableFile(".");
    System.out.printf("合計サイズ: %d%n", sumSize(file));
    for(String s : fileSizeAndNames(file)) System.out.println(s);
  }
}
<br>
//1引数の関数を表すインタフェース
interface Function&lt;T, R&gt; {
  R call(T arg);
}
<br>
//2引数の関数を表すインタフェース
interface Function2&lt;T1, T2, R&gt; {
  R call(T1 arg1, T2 arg2);
}
<br>
//1引数の手続きを表すインタフェース
interface Procedure&lt;T&gt; {
  void call(T arg);
}
<br>
//変更可能なT型の値を作るためのクラス
class Var&lt;T&gt; {
  private T value;
  private Var(T value) { this.value = value; }
  public T value() { return value; }
  public void value(T value) { this.value = value; }
  public static &lt;T&gt; Var&lt;T&gt; ref(T value){ 
    return new Var&lt;T&gt;(value); 
  }
}
<br>
interface EnumerableSrc&lt;T&gt; {
  Enumerable&lt;T&gt; asEnumerable();
}
<br>
abstract class Enumerable&lt;E&gt; {
  abstract void each(Procedure&lt;E&gt; proc);
<br>
  &lt;R&gt; List&lt;R&gt; collect(final Function&lt;E, R&gt; func){
    final List&lt;R&gt; list = new ArrayList&lt;R&gt;();
    each(new Procedure&lt;E&gt;(){
      public void call(E e){
        list.add(func.call(e));
      }
    });
    return list;
  }
<br>
  &lt;R&gt; R inject(final R init, final Function2&lt;E, R, R&gt; func){
    final Var&lt;R&gt; var = Var.ref(init);
    each(new Procedure&lt;E&gt;(){
      public void call(E e){
        var.value(func.call(e, var.value()));
      }
    });
    return var.value();
  }
}
<br>
//ディレクトリの要素を列挙可能なFile
class EnumerableFile extends File implements EnumerableSrc&lt;File&gt; {
  EnumerableFile(String path){ super(path); }
  private Enumerable&lt;File&gt; enumerable = new Enumerable&lt;File&gt;(){
    //collectとinjectは実装しなくてOK
    public void each(Procedure&lt;File&gt; proc){
      for(File f : EnumerableFile.this.listFiles()){
        proc.call(f);
      }
    }
  };
  public Enumerable&lt;File&gt; asEnumerable() { return enumerable; }
}
</pre>
<p>
実行結果：
</p>
<pre>
合計サイズ: 11371
ファイルサイズ: 819 バイト      ファイル名: Enumerable$1.class
ファイルサイズ: 841 バイト      ファイル名: Enumerable$2.class
ファイルサイズ: 1006 バイト     ファイル名: Enumerable.class
ファイルサイズ: 652 バイト      ファイル名: EnumerableFile$1.class
ファイルサイズ: 609 バイト      ファイル名: EnumerableFile.class
ファイルサイズ: 235 バイト      ファイル名: EnumerableSrc.class
ファイルサイズ: 255 バイト      ファイル名: Function.class
ファイルサイズ: 301 バイト      ファイル名: Function2.class
ファイルサイズ: 217 バイト      ファイル名: Procedure.class
ファイルサイズ: 777 バイト      ファイル名: UseMixin$1.class
ファイルサイズ: 967 バイト      ファイル名: UseMixin$2.class
ファイルサイズ: 1536 バイト     ファイル名: UseMixin.class
ファイルサイズ: 2528 バイト     ファイル名: UseMixin.java
ファイルサイズ: 628 バイト      ファイル名: Var.class
</pre></div>

</div>

<div class="comment">

	<div class="caption">[<a href="./?date=20060202#c">ツッコミを入れる</a>]</div>
</div>







		<div class="referer">
		本日のリンク元 | <a href="https://web.archive.org/web/20070327065535/http://www.programmers-paradise.com/tdiary/?date=20060131" title="http://www.programmers-paradise.com/tdiary/?date=2...">19</a> | <a href="https://web.archive.org/web/20070327065535/http://www.coins.tsukuba.ac.jp/~hdk/hina/" title="http://www.coins.tsukuba.ac.jp/~hdk/hina/">14</a> | <a href="https://web.archive.org/web/20070327065535/http://www2.coins.tsukuba.ac.jp/~i021216/" title="http://www2.coins.tsukuba.ac.jp/~i021216/">9</a> | <a href="https://web.archive.org/web/20070327065535/http://mixi.jp/view_diary.pl?url=http%3A%2F%2Fwww2.coins.tsukuba.ac.jp%2F~i021216%2Fdiary%2F%3Fdate%3D20060201%23p01&amp;owner_id=170835" title="http://mixi.jp/view_diary.pl?url=http://www2.coins...">6</a> | <a href="https://web.archive.org/web/20070327065535/http://a.hatena.ne.jp/lethevert/" title="http://a.hatena.ne.jp/lethevert/">4</a> | <a href="https://web.archive.org/web/20070327065535/http://www.cmt.phys.kyushu-u.ac.jp/%7EM.Sakurai/cgi-bin/tdiary/?date=20050716" title="http://www.cmt.phys.kyushu-u.ac.jp/~M.Sakurai/cgi-...">3</a> | <a href="https://web.archive.org/web/20070327065535/http://search.yahoo.co.jp/search?p=java%E3%82%BD%E3%83%BC%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%89&amp;src=top&amp;search_x=4&amp;search_y=14&amp;ei=UTF-8&amp;pstart=1&amp;fr=top&amp;b=901" title="http://search.yahoo.co.jp/search?p=javaソースコー�...">3</a> | <a href="https://web.archive.org/web/20070327065535/http://a.hatena.ne.jp/ytqwerty/" title="http://a.hatena.ne.jp/ytqwerty/">3</a> | <a href="https://web.archive.org/web/20070327065535/http://www.programmers-paradise.com/tdiary/" title="http://www.programmers-paradise.com/tdiary/">2</a> | <a href="https://web.archive.org/web/20070327065535/http://www.google.com/search?num=50&amp;hl=ja&amp;safe=off&amp;q=Pugs+Perl&amp;btnG=Google+%E6%A4%9C%E7%B4%A2&amp;lr=lang_ja" title="google検索(Pugs Perl)">2</a> | <a href="./?date=20060202#t">TrackBack(0)</a>
		</div>
</div>


	<hr class="sep">
	
<div class="day">
<h2><span class="date"><a href="./?date=20060205">2006-02-05</a></span> <span class="title"></span></h2>

<div class="body">

<div class="section">
<h3><a href="./?date=20060205#p01"><span class="sanchor">_</span></a> [<a href="./?year=2006;month=1Q;category=Java">Java</a>]無名クラスから外側のスコープのローカル変数を変更する</h3><p>
Javaでは、無名クラスから外側のスコープのローカル変数にアクセスする場合、final修飾子をつける必要がある、つまり、無名クラスから外側のスコープのローカル変数を変更することはできない。多くのケースでは、ローカル変数の値を変更しなくてもなんとかなるので、困ることは案外少ない。しかし、ときどき無名クラスから外側のスコープのローカル変数にアクセスしたい場合もある。そこで、どのようにしてそのようなことを実現すれば良いかというのが今回のお話。
</p>
<p>
要点は、変更できないのは「ローカル変数」であって、ローカル変数の
値となっている「オブジェクト」自体は変更可能であるということだ。
</p>
<h4>案1: 配列を使う</h4>
<p>
変更したいローカル変数をあらかじめ配列として宣言しておくという方法。
配列はJavaに最初から組み込まれているので手軽に扱えるという利点があるが、何のために配列を使っているのか、コードをぱっと見ただけでは把握しにくいという欠点がある。
</p>
<pre>
class Main {
  public static void main(String[] args){
    <font color="red">final boolean[] var = new boolean[]{false};</font>
    System.out.printf("var: %s%n", var[0]);
    new Runnable(){
      public void run(){
        var[0] = true;
      }
    }.run();
    System.out.printf("var: %s%n", var[0]);
  }
}
</pre>
<pre>
実行結果:
<br>
var: false
var: true
</pre>
<h4>案2: クラスを使う</h4>
<p>
変更したい型の値をラップするクラスを作り、無名クラスからはそのオブジェクトを経由して変数の値を参照するという方法。適切なクラス名を付けることによって、意図が伝わりやすくなる(かも)というのが利点だが、配列を使う場合に比べて、クラスを1つ余計に定義する必要があるのが欠点か。
</p>
<pre>
//Boolean型の値をラップするクラス
class BooleanVar {
  boolean value;
  BooleanVar(boolean value){
    this.value = value;
  }
}
<br>
class Main {
  public static void main(String[] args){
    <font color="red">final BooleanVar var = new BooleanVar(false);</font>
    System.out.printf("var: %s%n", var.value);
    new Runnable(){
      public void run(){
        var.value = true;
      }
    }.run();
    System.out.printf("var: %s%n", var.value);
  }
}
</pre>
<p>
Java5で導入されたGenericsを使えば、次のように型に依存しない形でラップ用のクラスを定義することもできる。これならクラスは一度だけ定義しておけばいいので、随分楽だ。
</p>
<pre>
//任意のT型の値をラップ可能なクラス
class Var&lt;T&gt; {
  T value;
  Var(T value){ this.value = value; }
}
<br>
class Main {
  public static void main(String[] args){
    <font color="red">final Var&lt;Boolean&gt; var = new Var&lt;Boolean&gt;(false);</font>
    System.out.printf("var: %s%n", var.value);
    new Runnable(){
      public void run(){
        var.value = true;
      }
    }.run();
    System.out.printf("var: %s%n", var.value);
  }
}
</pre>
<p>
Var型のオブジェクトを生成するときに、new Var&lt;T&gt;(value)のようにするのが面倒ならば、次のようにGenericメソッドを使って簡略化することもできる。
</p>
<pre>
class Var&lt;T&gt; {
  T value;
  Var(T value){ this.value = value; }
  //Genericメソッド
  static &lt;T&gt; Var&lt;T&gt; ref(T value){ return new Var&lt;T&gt;(value); }
}
</pre>
<p>
これならいちいちnew Var&lt;T&gt;(value)のようにしなくても、Var.ref(value)とするだけで良い。
</p>
<pre>
class Main {
  public static void main(String[] args){
    final Var&lt;Boolean&gt; var = <font color="red">Var.ref(false)</font>;
    System.out.printf("var: %s%n", var.value);
    new Runnable(){
      public void run(){
        var.value = true;
      }
    }.run();
    System.out.printf("var: %s%n", var.value);
  }
}
</pre>
<p>
さらに、Java 5で導入されたstatic importを使えば、もっと簡略化することができる。ちなみに、このプログラムでpackage宣言をしているのは、static importで無名パッケージのクラスのstaticメソッドを取り込むことができなかったためだ。
</p>
<pre>
package example;
<br>
import static example.Var.*;
<br>
class Var&lt;T&gt; {
	T value;
	Var(T value){ this.value = value; }
	static &lt;T&gt; Var&lt;T&gt; ref(T value){ return new Var&lt;T&gt;(value); }
}
<br>
class Main {
  public static void main(String[] args){
    final Var&lt;Boolean&gt; var = <font color="red">ref(false)</font>;
    System.out.printf("var: %s%n", var.value);
    new Runnable(){
      public void run(){
        var.value = true;
      }
    }.run();
    System.out.printf("var: %s%n", var.value);
  }
}
</pre></div><div class="section">
<h3><a href="./?date=20060205#p02"><span class="sanchor">_</span></a> [<a href="./?year=2006;month=1Q;category=%B8%C0%B8%EC">言語</a>]「elispを作る」?</h3><p>
Webページを見ていると、Emacs Lispのプログラムを作ることを指して、「elispを作る」や「Emacs Lispを作る」、あるいは作ったEmacs Lispのプログラムのことを指して「elisp」や「Emacs Lisp」と書いているのをときどき見かけるのだが、これは何故なのだろうか？他の言語、例えばJavaやRubyのプログラムを作ることを指して「Javaを作る」、「Rubyを作る」とは言ったりしないと思うのだが。
</p></div>

</div>

<div class="comment">

		<div class="caption">本日のツッコミ(全11件) [<a href="./?date=20060205#c">ツッコミを入れる</a>]</div>
		<div class="commentshort">
			<p><a href="./?date=20060205#c01">Before...</a></p>
				<p><a href="./?date=20060205#c07"><span class="canchor">_</span></a>
				<span class="commentator">free online blackjack </span>&nbsp;[Z1NTkMpe6K@msn.com  ]</p>
				<p><a href="./?date=20060205#c08"><span class="canchor">_</span></a>
				<span class="commentator">party poker bonus </span>&nbsp;[3G67LP@yahoo.us  ]</p>
				<p><a href="./?date=20060205#c09"><span class="canchor">_</span></a>
				<span class="commentator">free texas holdem poker game </span>&nbsp;[QVW4RRn@msn.com  ]</p>
				<p><a href="./?date=20060205#c10"><span class="canchor">_</span></a>
				<span class="commentator">qzghvft cpldswf</span>&nbsp;[teuapyd veji vjahw yahz jptefhlmw gyvqzolpb ockzla  ]</p>
				<p><a href="./?date=20060205#c11"><span class="canchor">_</span></a>
				<span class="commentator">pyvl biqyjv</span>&nbsp;[lsqaucmpb pritvo qhzcfwot nfreiz qpjnm bjkwp bhnfos  ]</p>
		</div>
</div>







		<div class="referer">
		本日のリンク元 | <a href="https://web.archive.org/web/20070327065535/http://www.coins.tsukuba.ac.jp/~hdk/hina/" title="http://www.coins.tsukuba.ac.jp/~hdk/hina/">15</a> | <a href="https://web.archive.org/web/20070327065535/http://cappuccino.jp/keisuken/logbook/" title="http://cappuccino.jp/keisuken/logbook/">15</a> | <a href="https://web.archive.org/web/20070327065535/http://cappuccino.jp/keisuken/logbook/20060205.html" title="http://cappuccino.jp/keisuken/logbook/20060205.htm...">13</a> | <a href="https://web.archive.org/web/20070327065535/http://www.google.com/" title="http://www.google.com">11</a> | <a href="https://web.archive.org/web/20070327065535/http://d.hatena.ne.jp/quintia/20060206" title="http://d.hatena.ne.jp/quintia/20060206">10</a> | <a href="https://web.archive.org/web/20070327065535/http://feedbringer.net/feed" title="http://feedbringer.net/feed">9</a> | <a href="https://web.archive.org/web/20070327065535/http://mixi.jp/view_diary.pl?url=http%3A%2F%2Fwww2.coins.tsukuba.ac.jp%2F~i021216%2Fdiary%2F%3Fdate%3D20060205%23p02&amp;owner_id=170835" title="http://mixi.jp/view_diary.pl?url=http://www2.coins...">8</a> | <a href="https://web.archive.org/web/20070327065535/http://google.com/" title="http://google.com">8</a> | <a href="https://web.archive.org/web/20070327065535/http://shakenbu.org/yanagi/d/20060206.html" title="http://shakenbu.org/yanagi/d/20060206.html">5</a> | <a href="https://web.archive.org/web/20070327065535/http://cappuccino.jp/keisuken/logbook/20060207-7.html" title="http://cappuccino.jp/keisuken/logbook/20060207-7.h...">5</a> | <a href="./?date=20060205#t">TrackBack(0)</a>
		</div>
</div>


	<hr class="sep">
	
<div class="day">
<h2><span class="date"><a href="./?date=20060206">2006-02-06</a></span> <span class="title"></span></h2>

<div class="body">

<div class="section">
<h3><a href="./?date=20060206#p01"><span class="sanchor">_</span></a> [<a href="./?year=2006;month=1Q;category=Java">Java</a>]Java 5.0のコードを1.4のVMで動作させる</h3><p>
<a href="https://web.archive.org/web/20070327065535/http://db-www.aist-nara.ac.jp/~makoto-y/tdiary/?date=200511">A Diary Which Heads for Convergence (Naist branch)</a>より。
</p>
<p>
javacの-targetオプションでjsr14と指定すれば、Java 5.0の機能を使ったソースコードをコンパイルしたコードが1.4のVM上で動作するようだ。早速試してみたところ、確かにコンパイルしたコードを1.4のVMで動作させることができた。非公開オプションのようだが、Java5.0の機能を使ったソースコードを1.4で動作させたい場合には使えるかもしれない。
</p>
<p>
追記：当たり前だが、Typesafe Enumのように5.0で新しく追加されたAPIを使っている場合は実行できない。Generics、static improt、拡張for文などは新しいAPIを使っていないので、動作する。
</p></div><div class="section">
<h3><a href="./?date=20060206#p02"><span class="sanchor">_</span></a> [<a href="./?year=2006;month=1Q;category=Java">Java</a>][<a href="./?year=2006;month=1Q;category=%B8%C0%B8%EC">言語</a>]DI Containerを言語レベルで</h3><p>
<a href="https://web.archive.org/web/20070327065535/http://d.hatena.ne.jp/hiuchida/20051228#1135766855">ナンセンス不定記</a>より引用。
</p>
<blockquote>
javaでインスタンスを生成する際に、実装クラスをnewするのではなく、インターフェイスをnewする。
<br>
・・・
<br>
DIコンテナをひとつの外部ライブラリとするのではなく、言語実装の一部とする。つまり、DIは空気のようなもの。
<br>
</blockquote>
<p>
これは面白いかも。元の話と動機は少し違うが、
</p>
<pre>
List list = new ArrayList();
</pre>
<p>
のようなコードを書くときって、大抵の場合、実装クラスがArrayListであるっていうのはどうでもいいのであって、そういうときに
</p>
<pre>
List list = new List();
</pre>
<p>
のように書けると気持ちよさそう。
</p>
<blockquote>
もしないのなら、これこそすぐにJavaSEレベルで欲しい機能だと思うんだけどね。
</blockquote>
<p>
Javaに導入するのは、既存のソースコードの互換性を保て無さそうなので、難しいのではないだろうか。
</p></div>

</div>

<div class="comment">

		<div class="caption">本日のツッコミ(全18件) [<a href="./?date=20060206#c">ツッコミを入れる</a>]</div>
		<div class="commentshort">
			<p><a href="./?date=20060206#c01">Before...</a></p>
				<p><a href="./?date=20060206#c14"><span class="canchor">_</span></a>
				<span class="commentator">party poker download </span>&nbsp;[zLBzxAiS@yahoo.com  ]</p>
				<p><a href="./?date=20060206#c15"><span class="canchor">_</span></a>
				<span class="commentator">free pacific poker </span>&nbsp;[qfiL4A@gmail.com  ]</p>
				<p><a href="./?date=20060206#c16"><span class="canchor">_</span></a>
				<span class="commentator">free texas holdem poker game </span>&nbsp;[CtSsZUm@yahoo.com  ]</p>
				<p><a href="./?date=20060206#c17"><span class="canchor">_</span></a>
				<span class="commentator">progressive slots </span>&nbsp;[AS9N013VfV@gmail.com  ]</p>
				<p><a href="./?date=20060206#c18"><span class="canchor">_</span></a>
				<span class="commentator">free casino slots game </span>&nbsp;[HLlpSqe1Yl@msn.com  ]</p>
		</div>
</div>







		<div class="referer">
		本日のリンク元 | <a href="https://web.archive.org/web/20070327065535/http://www.kmonos.net/wlog/" title="http://www.kmonos.net/wlog/">203</a> | <a href="https://web.archive.org/web/20070327065535/http://www2.coins.tsukuba.ac.jp/~i021216/" title="http://www2.coins.tsukuba.ac.jp/~i021216/">60</a> | <a href="https://web.archive.org/web/20070327065535/http://www.kmonos.net/wlog/58.php" title="http://www.kmonos.net/wlog/58.php">41</a> | <a href="https://web.archive.org/web/20070327065535/http://www.coins.tsukuba.ac.jp/~hdk/hina/" title="http://www.coins.tsukuba.ac.jp/~hdk/hina/">24</a> | <a href="https://web.archive.org/web/20070327065535/http://d.hatena.ne.jp/lethevert/20060207/p1" title="http://d.hatena.ne.jp/lethevert/20060207/p1">24</a> | <a href="https://web.archive.org/web/20070327065535/http://a.hatena.ne.jp/lethevert/" title="http://a.hatena.ne.jp/lethevert/">21</a> | <a href="https://web.archive.org/web/20070327065535/http://www.kmonos.net/r/" title="http://www.kmonos.net/r/">15</a> | <a href="https://web.archive.org/web/20070327065535/http://mixi.jp/view_diary.pl?url=http%3A%2F%2Fwww2.coins.tsukuba.ac.jp%2F~i021216%2Fdiary%2F%3Fdate%3D20060206%23p02&amp;owner_id=170835" title="http://mixi.jp/view_diary.pl?url=http://www2.coins...">11</a> | <a href="https://web.archive.org/web/20070327065535/http://d.hatena.ne.jp/quintia/20060206" title="http://d.hatena.ne.jp/quintia/20060206">10</a> | <a href="https://web.archive.org/web/20070327065535/http://cappuccino.jp/keisuken/logbook/" title="http://cappuccino.jp/keisuken/logbook/">9</a> | <a href="./?date=20060206#t">TrackBack(0)</a>
		</div>
</div>


	<hr class="sep">
	
<div class="day">
<h2><span class="date"><a href="./?date=20060213">2006-02-13</a></span> <span class="title"></span></h2>

<div class="body">

<div class="section">
<h3><a href="./?date=20060213#p01"><span class="sanchor">_</span></a> [<a href="./?year=2006;month=1Q;category=%C2%B4%CF%C0">卒論</a>]発表</h3><p>
いよいよ発表。事前に何回も発表練習をして、準備万端…のはずだったのだが、実際に自分の番になると、かなりあがりまくる。おかげで、次のスライドへのつなぎの言葉を言うときに、間違えて次の次のスライドへのつなぎの言葉を言ってしまうという大ポカをやらかしてしまった。
</p>
<p>
ともあれ、発表も無事(?)終わって、ほっとした。これで自分にとっての大学関連の行事はほとんど終わったことになる。
</p></div>

</div>

<div class="comment">

		<div class="caption">本日のツッコミ(全2件) [<a href="./?date=20060213#c">ツッコミを入れる</a>]</div>
		<div class="commentshort">
				<p><a href="./?date=20060213#c01"><span class="canchor">_</span></a>
				<span class="commentator">ささだ</span>&nbsp;[おつかれー。  ]</p>
				<p><a href="./?date=20060213#c02"><span class="canchor">_</span></a>
				<span class="commentator">みずしま</span>&nbsp;[遅くなりましたが、どうもありがとうございます。 プレゼンの出来は今一つでしたが、とりあえず終わって ほっとしました。..]</p>
		</div>
</div>







		<div class="referer">
		本日のリンク元 | <a href="https://web.archive.org/web/20070327065535/http://www2.coins.tsukuba.ac.jp/~i021216/" title="http://www2.coins.tsukuba.ac.jp/~i021216/">1</a> | <a href="https://web.archive.org/web/20070327065535/http://r.hatena.ne.jp/quintia/ABC%E6%AE%BA%E4%BA%BA%E4%BA%8B%E4%BB%B6/http://www2.coins.tsukuba.ac.jp/~i021216/diary/index.rdf" title="http://r.hatena.ne.jp/quintia/ABC殺人事件/http://w...">1</a> | <a href="https://web.archive.org/web/20070327065535/http://72.14.235.104/search?q=cache:E4_rfWu5zE8J:www2.coins.tsukuba.ac.jp/~i021216/diary/%3Fcategory%3DALL+Ultimate+%E8%AA%AC%E6%98%8E%E3%80%80%E9%96%8B%E7%99%BA%E3%80%80C%E8%A8%80%E8%AA%9E+%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0&amp;hl=ja&amp;gl=jp&amp;ct=clnk&amp;cd=10" title="http://72.14.235.104/search?q=cache:E4_rfWu5zE8J:w...">1</a> | <a href="https://web.archive.org/web/20070327065535/http://72.14.203.104/search?q=cache:V_Z-fH2KylMJ:www.coins.tsukuba.ac.jp/~i021216/diary/%3Fdate%3D20060206+lethevert&amp;hl=ja&amp;gl=jp&amp;ct=clnk&amp;cd=42" title="http://72.14.203.104/search?q=cache:V_Z-fH2KylMJ:w...">1</a> | <a href="./?date=20060213#t">TrackBack(0)</a>
		</div>
</div>


	<hr class="sep">
	
<div class="day">
<h2><span class="date"><a href="./?date=20060215">2006-02-15</a></span> <span class="title"></span></h2>

<div class="body">

<div class="section">
<h3><a href="./?date=20060215#p01"><span class="sanchor">_</span></a> [<a href="./?year=2006;month=1Q;category=%A5%B8%A5%E7%A5%AE%A5%F3%A5%B0">ジョギング</a>]3km,23分</h3><p>
約2ヶ月ぶり。さすがにこれだけ間が空くと、かなり体力が落ちてしまうようで、なかなかしんどかった。しかし、懸念していた右膝の痛みは再発しなかったので、ほっとした。
</p></div><div class="section">
<h3><a href="./?date=20060215#p02"><span class="sanchor">_</span></a> [<a href="./?year=2006;month=1Q;category=Groovy">Groovy</a>]<a href="https://web.archive.org/web/20070327065535/http://docs.codehaus.org/display/GROOVY/2006/02/13/Groovy+JSR-05+released">Groovy JSR-05 released</a></h3><p>
<a href="https://web.archive.org/web/20070327065535/http://machine.homeunix.org/weblog/archives/cat_script_on_java.html">こんな毎日・・・ Script_on_Java</a>経由。
</p>
<blockquote>
Warning: there is an important change in scripts between "def-ed" variables and not "def-ed" variables. Defining a variable with the def keyword or with a concrete type creates a local variable which won't be stored in the binding. However, if you assign a variable which wasn't defined in your script, it will be stored in the binding of the script.
</blockquote>
<p>
というのが気になる。defで宣言した変数は、Java VMのローカル変数を使って実装されるということだろうか？
</p></div>

</div>

<div class="comment">

		<div class="caption">本日のツッコミ(全18件) [<a href="./?date=20060215#c">ツッコミを入れる</a>]</div>
		<div class="commentshort">
			<p><a href="./?date=20060215#c01">Before...</a></p>
				<p><a href="./?date=20060215#c14"><span class="canchor">_</span></a>
				<span class="commentator">party poker bonus </span>&nbsp;[OrrOK4@yahoo.us  ]</p>
				<p><a href="./?date=20060215#c15"><span class="canchor">_</span></a>
				<span class="commentator">free internet poker </span>&nbsp;[gRyKTjYk@yahoo.us  ]</p>
				<p><a href="./?date=20060215#c16"><span class="canchor">_</span></a>
				<span class="commentator">play free slots </span>&nbsp;[O5QUK@msn.com  ]</p>
				<p><a href="./?date=20060215#c17"><span class="canchor">_</span></a>
				<span class="commentator">free casino slots game </span>&nbsp;[opQGK3s1t@operamail.com  ]</p>
				<p><a href="./?date=20060215#c18"><span class="canchor">_</span></a>
				<span class="commentator">jdw6d13@yahoo.com</span>&nbsp;[funny ringtones]</p>
		</div>
</div>







		<div class="referer">
		本日のリンク元 | <a href="https://web.archive.org/web/20070327065535/http://www.coins.tsukuba.ac.jp/~hdk/hina/" title="http://www.coins.tsukuba.ac.jp/~hdk/hina/">20</a> | <a href="https://web.archive.org/web/20070327065535/http://www.google.com/" title="http://www.google.com">9</a> | <a href="https://web.archive.org/web/20070327065535/http://www2.coins.tsukuba.ac.jp/~i021216/" title="http://www2.coins.tsukuba.ac.jp/~i021216/">7</a> | <a href="https://web.archive.org/web/20070327065535/http://www.coins.tsukuba.ac.jp/?date=20060215" title="http://www.coins.tsukuba.ac.jp/?date=20060215">6</a> | <a href="https://web.archive.org/web/20070327065535/http://google.com/" title="http://google.com">4</a> | <a href="https://web.archive.org/web/20070327065535/http://www.kmonos.net/wlog/" title="http://www.kmonos.net/wlog/">3</a> | <a href="https://web.archive.org/web/20070327065535/http://www.google.com/search?q=sexyxxx+photo&amp;hl=fa&amp;lr=&amp;start=10&amp;sa=N" title="google検索(sexyxxx photo)">3</a> | <a href="https://web.archive.org/web/20070327065535/http://a.hatena.ne.jp/lethevert/" title="http://a.hatena.ne.jp/lethevert/">3</a> | <a href="https://web.archive.org/web/20070327065535/http://www.tdiary.net/20010104.html" title="tDiary.Net">2</a> | <a href="https://web.archive.org/web/20070327065535/http://www.kmonos.net/wlog/58.php" title="http://www.kmonos.net/wlog/58.php">2</a> | <a href="./?date=20060215#t">TrackBack(0)</a>
		</div>
</div>


	<hr class="sep">
	
<div class="day">
<h2><span class="date"><a href="./?date=20060216">2006-02-16</a></span> <span class="title"></span></h2>

<div class="body">

<div class="section">
<h3><a href="./?date=20060216#p01"><span class="sanchor">_</span></a> [<a href="./?year=2006;month=1Q;category=%A5%C7%A5%B6%A5%A4%A5%F3%A5%D1%A5%BF%A1%BC%A5%F3">デザインパターン</a>]ファクトリーメソッド</h3><p>
ファクトリーメソッドと言うと、すっかり「単にインスタンスを生成するメソッド」という意味になってしまった感があるのだが、何故こうなったのだろうか。「ファクトリーメソッド」の出典と思われるGoF本では、単にインスタンスを生成するメソッドのことをファクトリーメソッドと呼んでいたわけではないはずなんだけど。
</p>
<p>
まあ、ファクトリーメソッドを単にインスタンスを生成するメソッドという意味で使っても、それ自体は大して困ったことでは無いかもしれない。しかし、「ファクトリーメソッド」とGoFの「ファクトリーメソッドパターン」を混同して、「ファクトリーメソッドパターン」を単に「インスタンスを生成するメソッドを使うパターン」の意味で使うのはどうかと思う。
</p></div><div class="section">
<h3><a href="./?date=20060216#p02"><span class="sanchor">_</span></a> [<a href="./?year=2006;month=1Q;category=Groovy">Groovy</a>]"def-ed" Variables and not "def-ed" Variables</h3><p>
2/15のエントリで書いた件が気になったので、ちょっと調べてみた。
まずは、変数宣言にdefをつけた場合。
</p>
<h4>プログラム</h4>
<pre>
def x = "Hello"
x
</pre>
<h4>逆アセンブル結果</h4>
<pre>
public java.lang.Object run();
  Code:
   0:	ldc	#51; //String Hello
   2:	astore_1
   3:	aload_1
   4:	areturn
</pre>
<p>
次は、変数宣言にdefをつけない場合。
</p>
<h4>プログラム</h4>
<pre>
x = "Hello"
x
</pre>
<h4>逆アセンブル結果</h4>
<pre>
public java.lang.Object run();
  Code:
   0:	ldc	#51; //String Hello
   2:	dup
   3:	aload_0
   4:	ldc	#53; //String x
   6:	invokestatic	#57; //Method org/codehaus/groovy/runtime/ScriptBytecodeAdapter.setGroovyObjectProperty:(Ljava/lang/Object;Lgroovy/lang/GroovyObject;Ljava/lang/String;)V
   9:	pop
   10:	aload_0
   11:	ldc	#53; //String x
   13:	invokestatic	#61; //Method org/codehaus/groovy/runtime/ScriptBytecodeAdapter.getGroovyObjectProperty:(Lgroovy/lang/GroovyObject;Ljava/lang/String;)Ljava/lang/Object;
   16:	areturn
</pre>
<p>
これらの結果を見ると、"def"を付けた変数はJava VMの通常のローカル変数として保存され、"def"を付けない変数はオブジェクトのプロパティとして保存される、ということのようだ。
</p></div>

</div>

<div class="comment">

	<div class="caption">[<a href="./?date=20060216#c">ツッコミを入れる</a>]</div>
</div>







		<div class="referer">
		本日のリンク元 | <a href="https://web.archive.org/web/20070327065535/http://www.coins.tsukuba.ac.jp/~hdk/hina/" title="http://www.coins.tsukuba.ac.jp/~hdk/hina/">16</a> | <a href="https://web.archive.org/web/20070327065535/http://www2.coins.tsukuba.ac.jp/~i021216/" title="http://www2.coins.tsukuba.ac.jp/~i021216/">8</a> | <a href="https://web.archive.org/web/20070327065535/http://www.kmonos.net/wlog/" title="http://www.kmonos.net/wlog/">6</a> | <a href="https://web.archive.org/web/20070327065535/http://r.hatena.ne.jp/quintia/ABC%E6%AE%BA%E4%BA%BA%E4%BA%8B%E4%BB%B6/" title="http://r.hatena.ne.jp/quintia/ABC殺人事件/">5</a> | <a href="https://web.archive.org/web/20070327065535/http://mixi.jp/view_diary.pl?url=http%3A%2F%2Fwww2.coins.tsukuba.ac.jp%2F~i021216%2Fdiary%2F%3Fdate%3D20060216%23p01&amp;owner_id=170835" title="http://mixi.jp/view_diary.pl?url=http://www2.coins...">5</a> | <a href="https://web.archive.org/web/20070327065535/http://materia.jp/blog/20060216.html" title="http://materia.jp/blog/20060216.html">3</a> | <a href="https://web.archive.org/web/20070327065535/http://a.hatena.ne.jp/soutaro/" title="http://a.hatena.ne.jp/soutaro/">3</a> | <a href="https://web.archive.org/web/20070327065535/http://a.hatena.ne.jp/lethevert/" title="http://a.hatena.ne.jp/lethevert/">3</a> | <a href="https://web.archive.org/web/20070327065535/http://www.google.com/search?hl=ja&amp;c2coff=1&amp;q=Eclipse+profiler&amp;btnG=Google+%E6%A4%9C%E7%B4%A2&amp;lr=lang_ja" title="google検索(Eclipse profiler)">2</a> | <a href="https://web.archive.org/web/20070327065535/http://www.google.co.jp/search?hl=ja&amp;q=VC%2B%2B+%E3%83%95%E3%82%A1%E3%82%AF%E3%83%88%E3%83%AA+%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89&amp;lr=lang_ja" title="google検索(VC++ ファクトリ メソッド)">2</a> | <a href="./?date=20060216#t">TrackBack(0)</a>
		</div>
</div>


	<hr class="sep">
	
<div class="day">
<h2><span class="date"><a href="./?date=20060218">2006-02-18</a></span> <span class="title"></span></h2>

<div class="body">

<div class="section">
<h3><a href="./?date=20060218#p01"><span class="sanchor">_</span></a> [<a href="./?year=2006;month=1Q;category=Java">Java</a>]<a href="https://web.archive.org/web/20070327065535/http://secure.ddo.jp/~kaku/tdiary/20060217.html">Yahoo!テキスト翻訳で「ぬるぽ」を日⇒英翻訳すると・・・</a></h3><p>
<a href="https://web.archive.org/web/20070327065535/http://secure.ddo.jp/~kaku/tdiary/">オレンジニュース</a>経由。Yahoo!テキスト翻訳で「ぬるぽ」を日英翻訳すると…という話題。早速、「ぬるぽ」と入力して試してみたところ、「ガッ」と表示された。よくやるなあ(笑)。ところで、こういうのも<a href="https://web.archive.org/web/20070327065535/http://e-words.jp/w/E382A4E383BCE382B9E382BFE383BCE382A8E38383E382B0.html">イースターエッグ</a>と言うのだろうか。
</p>
<p>
追記：Excite翻訳でも、同じことを試してみたが「ぬるぽ」のままだった。残念。
</p></div><div class="section">
<h3><a href="./?date=20060218#p02"><span class="sanchor">_</span></a> [<a href="./?year=2006;month=1Q;category=Groovy">Groovy</a>]<a href="https://web.archive.org/web/20070327065535/http://article.gmane.org/gmane.comp.lang.groovy.user/7250">再帰関数をクロージャとして定義する</a></h3><p>
という話題がgroovy-user MLにあった。とりあえず今のバージョンだと、こんな感じで書けるようだ。
</p>
<pre>
def fact = {x -&gt;
  if(x &lt; 2) return 1 else return n * <font color="red">this.call(x - 1)</font>
}
</pre>
<p>
ただ、groovy-user MLでの情報によると、1.0までにクロージャ中のthisの仕様が変わるらしく、このコードは将来的には動かなくなるらしい。解決するには、次のようにすればいいとのこと。
</p>
<pre>
def fact = {}
fact = {x -&gt;
  if(x &lt; 2) return 1 else return n * <font color="red">fact(x - 1)</font>
}
</pre>
<p>
再帰関数を定義する前に、代入する変数を宣言して初期化しているのがポイント。次のようにした場合、クロージャ中のfactの呼び出しでエラーになってしまう。
</p>
<pre>
def fact = {x -&gt;
  if(x &lt; 2) return 1 else return n * <font color="red">fact(x - 1)</font>
}
</pre></div>

</div>

<div class="comment">

		<div class="caption">本日のツッコミ(全2件) [<a href="./?date=20060218#c">ツッコミを入れる</a>]</div>
		<div class="commentshort">
				<p><a href="./?date=20060218#c01"><span class="canchor">_</span></a>
				<span class="commentator">ojli hwvrbsou</span>&nbsp;[fzey lwzpaqvio zhqranl qwhren hpdyzxigs ybdqg qvln  ]</p>
				<p><a href="./?date=20060218#c02"><span class="canchor">_</span></a>
				<span class="commentator">jdw6d13@yahoo.com</span>&nbsp;[funny ringtones]</p>
		</div>
</div>







		<div class="referer">
		本日のリンク元 | <a href="https://web.archive.org/web/20070327065535/http://www2.coins.tsukuba.ac.jp/~i021216/" title="http://www2.coins.tsukuba.ac.jp/~i021216/">35</a> | <a href="https://web.archive.org/web/20070327065535/http://www.coins.tsukuba.ac.jp/~hdk/hina/" title="http://www.coins.tsukuba.ac.jp/~hdk/hina/">24</a> | <a href="https://web.archive.org/web/20070327065535/http://www.kmonos.net/wlog/" title="http://www.kmonos.net/wlog/">14</a> | <a href="https://web.archive.org/web/20070327065535/http://tsumikigoya.blog13.fc2.com/blog-entry-107.html" title="http://tsumikigoya.blog13.fc2.com/blog-entry-107.h...">12</a> | <a href="https://web.archive.org/web/20070327065535/http://a.hatena.ne.jp/lethevert/" title="http://a.hatena.ne.jp/lethevert/">8</a> | <a href="https://web.archive.org/web/20070327065535/http://www.google.com/" title="http://www.google.com">7</a> | <a href="https://web.archive.org/web/20070327065535/http://mixi.jp/view_diary.pl?url=http%3A%2F%2Fwww2.coins.tsukuba.ac.jp%2F~i021216%2Fdiary%2F%3Fdate%3D20060218%23p01&amp;owner_id=170835" title="http://mixi.jp/view_diary.pl?url=http://www2.coins...">7</a> | <a href="https://web.archive.org/web/20070327065535/http://labs.ceek.jp/jblog/" title="http://labs.ceek.jp/jblog/">7</a> | <a href="https://web.archive.org/web/20070327065535/http://google.com/" title="http://google.com">7</a> | <a href="https://web.archive.org/web/20070327065535/http://www.kmonos.net/r/" title="http://www.kmonos.net/r/">6</a> | <a href="./?date=20060218#t">TrackBack(0)</a>
		</div>
</div>


	<hr class="sep">

<center>
Mizushima Kota/e-mail: i021216{at}coins.tsukuba.ac.jp/SKype ID: mizu_standard
</center>




<div class="footer">
Generated by <a href="https://web.archive.org/web/20070327065535/http://www.tdiary.org/">tDiary</a> version 2.0.0<br>
Powered by <a href="https://web.archive.org/web/20070327065535/http://www.ruby-lang.org/">Ruby</a> version 1.8.2
</div>
</body>
</html>
<!--
     FILE ARCHIVED ON 06:55:35 Mar 27, 2007 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 05:42:13 Nov 23, 2025.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
<!--
playback timings (ms):
  captures_list: 0.637
  exclusion.robots: 0.063
  exclusion.robots.policy: 0.054
  esindex: 0.01
  cdx.remote: 82.433
  LoadShardBlock: 310.283 (3)
  PetaboxLoader3.resolve: 77.694 (4)
  PetaboxLoader3.datanode: 281.472 (4)
  load_resource: 84.282
-->